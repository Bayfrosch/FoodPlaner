{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../src/api.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","const API_URL = typeof window !== 'undefined' ? '/api' : 'http://localhost:3000/api';\n\n// ============================================\n// HELPER FUNCTION für alle API Calls\n// ============================================\nexport const apiCall = async (\n  endpoint: string,\n  options: RequestInit = {}\n) => {\n  const token = typeof window !== 'undefined' ? localStorage.getItem('token') : null;\n\n  const headers:  HeadersInit = {\n    'Content-Type': 'application/json',\n    ...(options.headers as Record<string, string>),\n  };\n\n  // Falls Token vorhanden → in Header packen\n  if (token) {\n    headers['Authorization'] = `Bearer ${token}`;\n  }\n\n  const response = await fetch(`${API_URL}${endpoint}`, {\n    ...options,\n    headers,\n  });\n\n  // Falls Fehler → Error werfen\n  if (!response.ok) {\n    let error: any = { error: 'API Error' };\n    try {\n      const contentType = response.headers.get('content-type');\n      if (contentType?.includes('application/json')) {\n        error = await response.json();\n      } else {\n        error = { error: `HTTP ${response.status}: ${response.statusText}` };\n      }\n    } catch (e) {\n      error = { error: `HTTP ${response.status}: ${response.statusText}` };\n    }\n    \n    // Falls 401 (Unauthorized) and not on login page → redirect zu Login\n    if (response.status === 401 && typeof window !== 'undefined') {\n      const isLoginPage = window.location.pathname === '/login';\n      const isRegisterPage = window.location.pathname === '/register';\n      \n      if (!isLoginPage && !isRegisterPage) {\n        localStorage.removeItem('token');\n        localStorage.removeItem('userId');\n        window.location.href = '/login';\n      }\n    }\n    \n    throw new Error(error.error || 'API Error');\n  }\n\n  return response.json();\n};\n\n// ============================================\n// AUTH APIs (Login, Register, etc.)\n// ============================================\nexport const auth = {\n  register: (username: string, password: string) =>\n    apiCall('/auth/register', {\n      method: 'POST',\n      body: JSON.stringify({ username, password }),\n    }),\n\n  login: (username: string, password: string) =>\n    apiCall('/auth/login', {\n      method:  'POST',\n      body:  JSON.stringify({ username, password }),\n    }),\n\n  me: () => apiCall('/auth/me'),\n\n  updateProfile: (currentPassword: string, newPassword?: string) =>\n    apiCall('/auth/profile', {\n      method: 'PUT',\n      body: JSON.stringify({ currentPassword, newPassword }),\n    }),\n\n  logout: () => {\n    localStorage.removeItem('token');\n    localStorage.removeItem('userId');\n  },\n};\n\n// ============================================\n// LISTS APIs (Einkaufslisten)\n// ============================================\nexport const lists = {\n  getAll:  () => apiCall('/lists'),\n\n  getById: (id: number) => apiCall(`/lists/${id}`),\n\n  create: (title: string, description: string = '') =>\n    apiCall('/lists', {\n      method: 'POST',\n      body: JSON.stringify({ title, description }),\n    }),\n\n  update: (id: number, title: string, description: string) =>\n    apiCall(`/lists/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify({ title, description }),\n    }),\n\n  delete: (id: number) =>\n    apiCall(`/lists/${id}`, { method: 'DELETE' }),\n\n  getCategories: (id: number) => apiCall(`/lists/${id}/categories`),\n\n  syncCategory: (id: number, itemName: string, category: string | null) =>\n    apiCall(`/lists/${id}/categories`, {\n      method: 'POST',\n      body: JSON.stringify({ itemName, category }),\n    }),\n\n  deleteCategory: (id: number, category: string) =>\n    apiCall(`/lists/${id}/categories/${encodeURIComponent(category)}`, { method: 'DELETE' }),\n\n  getCategoryOrder: (id: number) => apiCall(`/lists/${id}/categories/order`),\n\n  updateCategoryOrder: (id: number, categories: string[]) =>\n    apiCall(`/lists/${id}/categories/order`, {\n      method: 'PUT',\n      body: JSON.stringify({ categories }),\n    }),\n};\n\n// ============================================\n// ITEMS APIs (Einkaufslisten Items)\n// ============================================\nexport const items = {\n  getAll: (listId: number) => apiCall(`/lists/${listId}/items`),\n\n  create: (listId: number, name: string) =>\n    apiCall(`/lists/${listId}/items`, {\n      method: 'POST',\n      body: JSON.stringify({ name }),\n    }),\n\n  update: (listId: number, itemId: number, completed: boolean) =>\n    apiCall(`/lists/${listId}/items/${itemId}`, {\n      method: 'PUT',\n      body: JSON.stringify({ completed }),\n    }),\n\n  updateCategory: (listId: number, itemId: number, category: string | null) =>\n    apiCall(`/lists/${listId}/items/${itemId}`, {\n      method: 'PUT',\n      body: JSON.stringify({ category }),\n    }),\n\n  delete: (listId: number, itemId:  number) =>\n    apiCall(`/lists/${listId}/items/${itemId}`, { method: 'DELETE' }),\n};\n\n// ============================================\n// COLLABORATORS APIs (Mitarbeiter)\n// ============================================\nexport const collaborators = {\n  getAll: (listId: number) =>\n    apiCall(`/lists/${listId}/collaborators`),\n\n  invite: (listId: number, username: string, role: 'editor' | 'viewer') =>\n    apiCall(`/lists/${listId}/collaborators`, {\n      method: 'POST',\n      body: JSON.stringify({ username, role }),\n    }),\n\n  add: (listId: number, userId: number, role: 'editor' | 'viewer') =>\n    apiCall(`/lists/${listId}/collaborators`, {\n      method: 'POST',\n      body: JSON.stringify({ userId, role }),\n    }),\n\n  update: (listId: number, userId: number, role: 'editor' | 'viewer') =>\n    apiCall(`/lists/${listId}/collaborators/${userId}`, {\n      method: 'PUT',\n      body: JSON.stringify({ role }),\n    }),\n\n  remove: (listId: number, collaboratorId: number) =>\n    apiCall(`/lists/${listId}/collaborators/${collaboratorId}`, { method: 'DELETE' }),\n\n  accept: (listId: number, collaboratorId: number) =>\n    apiCall(`/lists/${listId}/collaborators/${collaboratorId}/accept`, {\n      method: 'POST',\n    }),\n};\n\n// ============================================\n// RECIPES APIs (Rezepte)\n// ============================================\nexport const recipes = {\n  getAll: () => apiCall('/recipes'),\n\n  getById: (id: number) => apiCall(`/recipes/${id}`),\n\n  create: (title: string, description: string = '', items: Array<{ name: string }> = []) =>\n    apiCall('/recipes', {\n      method: 'POST',\n      body: JSON.stringify({ title, description, items }),\n    }),\n\n  update: (id: number, title: string, description: string, items?: Array<{ name: string; category?: string }>) =>\n    apiCall(`/recipes/${id}`, {\n      method: 'PUT',\n      body: JSON.stringify({ title, description, items }),\n    }),\n\n  delete: (id: number) =>\n    apiCall(`/recipes/${id}`, { method: 'DELETE' }),\n\n  addItem: (id: number, name: string) =>\n    apiCall(`/recipes/${id}/items`, {\n      method: 'POST',\n      body: JSON.stringify({ name }),\n    }),\n\n  deleteItem: (id: number, itemId: number) =>\n    apiCall(`/recipes/${id}/items/${itemId}`, { method: 'DELETE' }),\n\n  addToList: (id: number, listId: number, selectedItemIds?: number[]) =>\n    apiCall(`/recipes/${id}/add-to-list`, {\n      method: 'POST',\n      body: JSON.stringify({ listId, selectedItemIds }),\n    }),\n};"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}