module.exports=[4160,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(93462);class f{abortController=null;listId=null;callbacks=new Set;reconnectAttempts=0;maxReconnectAttempts=5;reconnectDelay=1e3;isAborting=!1;subscribe(a,b){return this.callbacks.add(b),this.listId===a&&this.abortController||this.connect(a),()=>{this.callbacks.delete(b),0===this.callbacks.size&&this.disconnect()}}async connect(a){if(this.listId=a,this.abortController&&!this.isAborting){this.isAborting=!0;try{!1===this.abortController.signal.aborted&&this.abortController.abort()}catch(a){console.debug("[SSE Client] Abort error (expected):",a instanceof Error?a.message:String(a))}this.isAborting=!1}this.abortController=new AbortController;let b=`/api/lists/${a}/updates`;console.log("[SSE Client] Attempting to connect to",b);try{let c=await fetch(b,{method:"GET",headers:{Authorization:"Bearer null"},signal:this.abortController.signal});if(console.log("[SSE Client] Response status:",c.status,c.statusText),!c.ok){let a=await c.text();console.error("[SSE Client] HTTP error:",c.status,a),this.handleConnectionError();return}if(!c.body){console.error("[SSE Client] No response body"),this.handleConnectionError();return}console.log("[SSE Client] Connected to list",a),await this.readStream(c.body)}catch(a){a instanceof Error&&"AbortError"===a.name?console.log("[SSE Client] Connection aborted"):a instanceof TypeError&&a.message.includes("BodyStreamBuffer")?console.log("[SSE Client] Stream was aborted during read"):(console.error("[SSE Client] Connection error:",a),this.handleConnectionError())}}async readStream(a){let b=a.getReader(),c=new TextDecoder,d="";try{for(;;){if(this.abortController?.signal.aborted){console.log("[SSE Client] Stream aborted, stopping read");break}let{done:a,value:e}=await b.read();if(a){console.log("[SSE Client] Stream ended"),this.handleConnectionError();break}let f=(d+=c.decode(e,{stream:!0})).split("\n");for(let a of(d=f.pop()||"",f))if(a.startsWith("data: ")){let b=a.slice(6);try{let a=JSON.parse(b);this.broadcastToCallbacks(a),this.reconnectAttempts=0}catch(a){console.error("[SSE Client] Failed to parse message:",a,"raw:",b)}}}}catch(a){if(a instanceof Error){if("AbortError"===a.name||a.message.includes("aborted"))return void console.log("[SSE Client] Stream read aborted");else if(a.message.includes("BodyStreamBuffer"))return void console.log("[SSE Client] Stream buffer was aborted (expected)")}console.error("[SSE Client] Stream read error:",a),this.handleConnectionError()}finally{try{b.releaseLock()}catch(a){console.debug("[SSE Client] Reader lock release error (expected):",a instanceof Error?a.message:String(a))}}}handleConnectionError(){if(this.reconnectAttempts<this.maxReconnectAttempts&&this.listId){let a=this.reconnectDelay*Math.pow(2,this.reconnectAttempts);console.log("[SSE Client] Reconnecting in ${delay}ms (attempt ${this.reconnectAttempts + 1}/${this.maxReconnectAttempts})"),setTimeout(()=>{this.reconnectAttempts++,this.listId&&this.connect(this.listId)},a)}else console.error("[SSE Client] Connection failed after maximum reconnection attempts")}broadcastToCallbacks(a){this.callbacks.forEach(b=>{try{b(a)}catch(a){console.error("[SSE Client] Error in callback:",a)}})}disconnect(){if(this.abortController&&!this.isAborting){this.isAborting=!0;try{!1===this.abortController.signal.aborted&&this.abortController.abort()}catch(a){console.debug("[SSE Client] Disconnect abort error (expected):",a instanceof Error?a.message:String(a))}this.isAborting=!1,this.abortController=null}this.listId=null,this.callbacks.clear(),this.reconnectAttempts=0,console.log("[SSE Client] Disconnected")}isConnected(){return null!==this.abortController}}let g=new f;function h({listId:a,onClose:d}){let[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!1),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)("viewer"),[v,w]=(0,c.useState)(!1);(0,c.useEffect)(()=>{x(),y()},[a]);let x=async()=>{try{q(!0);let[b,c]=await Promise.all([e.auth.me(),e.lists.getById(a)]);o(b.id===c.ownerId)}catch(a){console.error("Could not check ownership:",a),o(!1)}finally{q(!1)}},y=async()=>{try{i(!0);let b=await e.collaborators.getAll(a);g(b)}catch(a){k(a instanceof Error?a.message:"Fehler beim Laden der Kollaboratoren"),console.error(a)}finally{i(!1)}},z=async b=>{if(b.preventDefault(),k(""),m(""),!r.trim())return void k("Benutzername erforderlich");w(!0);try{await e.collaborators.invite(a,r,t),m("Einladung erfolgreich versendet!"),s(""),u("viewer"),setTimeout(()=>y(),500)}catch(a){k(a instanceof Error?a.message:"Fehler beim Versenden der Einladung")}finally{w(!1)}},A=async b=>{if(confirm("Diesen Nutzer entfernen?"))try{await e.collaborators.remove(a,b),m("Nutzer entfernt"),y()}catch(a){k(a instanceof Error?a.message:"Fehler beim Entfernen")}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,b.jsx)("div",{className:"bg-gradient-to-br from-[#14141f]/95 to-[#1a1a2e]/95 backdrop-blur-xl border border-purple-500/30 rounded-3xl max-w-md w-full shadow-2xl shadow-purple-500/30",children:(0,b.jsxs)("div",{className:"p-8",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Liste teilen"}),(0,b.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-gray-300 text-lg font-bold",children:"Close"})]}),j&&(0,b.jsx)("div",{className:"bg-red-500/10 border border-red-500/30 text-red-400 px-4 py-3 rounded-xl text-sm mb-4 backdrop-blur-sm",children:j}),l&&(0,b.jsx)("div",{className:"bg-green-500/10 border border-green-500/30 text-green-400 px-4 py-3 rounded-xl text-sm mb-4 backdrop-blur-sm",children:l}),!p&&!n&&(0,b.jsx)("div",{className:"bg-yellow-500/10 border border-yellow-500/30 text-yellow-400 px-4 py-3 rounded-xl text-sm mb-4 backdrop-blur-sm",children:"Du kannst Kollaboratoren nur hinzufügen, wenn du der Besitzer der Liste bist."}),n&&(0,b.jsxs)("form",{onSubmit:z,className:"mb-6 pb-6 border-b border-purple-500/20",children:[(0,b.jsx)("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Benutzername"}),(0,b.jsx)("input",{type:"text",value:r,onChange:a=>s(a.target.value),placeholder:"benutzername",className:"w-full px-4 py-2 bg-[#1a1a2e] border border-purple-500/30 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-500/30 transition-all mb-3",required:!0}),(0,b.jsx)("label",{className:"block text-gray-300 text-sm font-medium mb-2",children:"Berechtigung"}),(0,b.jsxs)("select",{value:t,onChange:a=>u(a.target.value),className:"w-full px-4 py-2 bg-[#1a1a2e] border border-purple-500/30 rounded-xl text-white focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-500/30 transition-all mb-4",children:[(0,b.jsx)("option",{value:"viewer",children:"Betrachter (nur lesen)"}),(0,b.jsx)("option",{value:"editor",children:"Bearbeiter (bearbeiten)"})]}),(0,b.jsx)("button",{type:"submit",disabled:v,className:"w-full px-4 py-2 text-white bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 disabled:from-gray-600 disabled:to-gray-700 rounded-xl font-bold transition-all shadow-lg shadow-purple-500/40",children:v?"Wird eingeladen...":"Einladen"})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-sm font-bold text-gray-300 mb-3",children:["Kollaboratoren (",f.length,")"]}),h?(0,b.jsx)("p",{className:"text-gray-400 text-sm",children:"Lädt..."}):0===f.length?(0,b.jsx)("p",{className:"text-gray-400 text-sm",children:"Keine Kollaboratoren"}):(0,b.jsx)("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:f.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 bg-[#1a1a2e] border border-purple-500/20 rounded-xl",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-white text-sm font-medium",children:a.username}),(0,b.jsx)("p",{className:"text-gray-400 text-xs",children:"editor"===a.role?"Bearbeiter":"Betrachter"})]}),(0,b.jsx)("button",{onClick:()=>A(a.id),className:"p-1 text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded transition-all",title:"Entfernen",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},a.id))})]})]})})})}let i=[];function j({id:a,name:d,category:f,completed:g,listId:h,customCategories:j,recipeName:k,onToggle:l,onDelete:m,onCategoryChange:n,onAddCategory:o,onDeleteCategory:p,isViewer:q=!1}){let r,[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(""),y=(0,c.useRef)(null),z=(0,c.useRef)(null);(0,c.useEffect)(()=>{let a=a=>{if(z.current){let b=z.current.contains(a.target);1===a.target.nodeType&&a.target.closest("[data-category-menu]")||b||!s||t(!1)}};return s&&document.addEventListener("click",a),()=>document.removeEventListener("click",a)},[s]);let A=async b=>{v(!0);try{await e.items.updateCategory(h,a,b),await e.lists.syncCategory(h,d,b),t(!1),x(""),n()}catch(a){console.error("Fehler beim Aktualisieren der Kategorie:",a)}finally{v(!1)}},B=async()=>{w.trim()&&(await A(w.trim()),o(w.trim()))},C=[...new Set([...i,...j])];return(0,b.jsxs)("li",{className:"p-4 hover:bg-[#1a1a2e] flex items-center gap-4 transition-all group relative overflow-visible",children:[(0,b.jsxs)("label",{className:"flex items-center gap-4 flex-1 cursor-pointer min-w-0",children:[(0,b.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,b.jsx)("input",{type:"checkbox",checked:g,onChange:()=>!q&&l(a,g),disabled:q,className:"peer w-6 h-6 cursor-pointer appearance-none bg-[#1a1a2e] border-2 border-[#2d2d3f] rounded-lg checked:bg-gradient-to-br checked:from-purple-500 checked:to-purple-600 checked:border-purple-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed"}),(0,b.jsx)("svg",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-4 h-4 text-white pointer-events-none opacity-0 peer-checked:opacity-100 transition-opacity",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("span",{className:`block transition-all truncate ${g?"text-gray-500 line-through":"text-gray-200"}`,children:d}),k&&(0,b.jsxs)("span",{className:"text-xs text-blue-400 block mt-1",children:["Rezept: ",k]}),f&&(0,b.jsx)("span",{className:"text-xs text-purple-400 block mt-1",children:f})]})]}),(0,b.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,b.jsx)("button",{ref:z,onClick:()=>!q&&t(!s),disabled:q,className:"p-2 text-gray-400 hover:text-purple-400 hover:bg-purple-500/10 rounded-lg transition-all opacity-100 sm:opacity-0 sm:group-hover:opacity-100 disabled:opacity-50 disabled:cursor-not-allowed",title:"Kategorie ändern",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),s&&z.current&&(r=z.current.getBoundingClientRect(),(0,b.jsxs)("div",{ref:y,"data-category-menu":!0,onClick:a=>a.stopPropagation(),style:{position:"fixed",top:`${r.bottom+8}px`,right:`${window.innerWidth-r.right}px`},className:"bg-[#1a1a2e] border border-[#2d2d3f] rounded-lg shadow-2xl z-50 min-w-40 max-h-64 overflow-y-auto",children:[(0,b.jsx)("button",{type:"button",onClick:a=>{a.preventDefault(),a.stopPropagation(),A(null)},disabled:u,className:"w-full text-left px-4 py-2 text-gray-400 hover:text-white hover:bg-purple-500/10 transition-all text-sm border-b border-[#2d2d3f] disabled:opacity-50",children:"Keine Kategorie"}),C.map(a=>(0,b.jsxs)("div",{className:"border-b border-[#2d2d3f] flex items-center group",children:[(0,b.jsx)("button",{type:"button",onClick:b=>{b.preventDefault(),b.stopPropagation(),A(a)},disabled:u,className:`flex-1 text-left px-4 py-2 transition-all text-sm disabled:opacity-50 ${f===a?"bg-purple-500/20 text-purple-300":"text-gray-400 hover:text-white hover:bg-purple-500/10"}`,children:a}),(0,b.jsx)("button",{type:"button",onClick:b=>{b.preventDefault(),b.stopPropagation(),confirm(`Kategorie "${a}" l\xf6schen?`)&&p(a)},className:"text-red-400 hover:text-red-300 p-2 opacity-0 group-hover:opacity-100 hover:bg-red-500/20 rounded transition-all mx-1",title:"Kategorie löschen",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})})})]},a)),(0,b.jsxs)("div",{className:"px-4 py-3 border-t border-[#2d2d3f] bg-[#0a0a0f]",children:[(0,b.jsx)("input",{type:"text",placeholder:"Neue Kategorie",value:w,onChange:a=>{a.stopPropagation(),x(a.target.value)},onKeyDown:a=>{a.stopPropagation(),"Enter"===a.key&&B()},className:"w-full bg-[#1a1a2e] border border-[#2d2d3f] rounded px-3 py-2 text-sm text-white placeholder-gray-500 focus:outline-none focus:border-purple-500"}),(0,b.jsx)("button",{type:"button",onClick:a=>{a.preventDefault(),a.stopPropagation(),B()},disabled:u||!w.trim(),className:"w-full mt-2 px-3 py-1 bg-purple-500/20 hover:bg-purple-500/30 text-purple-300 text-sm rounded transition-all disabled:opacity-50",children:"Hinzufügen"})]})]}))]}),(0,b.jsx)("button",{onClick:()=>!q&&m(a),disabled:q,className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition-all opacity-100 sm:opacity-0 sm:group-hover:opacity-100 flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",title:"Löschen",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})}function k(){let a,f=(0,d.useRouter)(),i=(0,d.useParams)(),k=i?.listId,[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)({isOwner:!1,isEditor:!0,isViewer:!1}),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!1),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(null);(0,c.useEffect)(()=>{A(!0)},[]),(0,c.useEffect)(()=>{if(!z||!k)return;L();let a=Number(k),b=g.subscribe(a,a=>{"category_updated"===a.type?(console.log(`Category updated for item: ${a.itemName} -> ${a.category}`),y(b=>a.category&&!b.includes(a.category)?[...b,a.category].sort():b)):"connected"!==a.type&&(console.log(`List ${k} updated - refreshing data`),L())});return()=>{b()}},[k,z]);let L=async()=>{try{s(!0);let a=Number(k),b=await e.lists.getById(a);m(b);try{let c=await e.auth.me();if(c){K(c.id);let d=await e.collaborators.getAll(a),f=b.ownerId===c.id,g=d?.find(a=>a.userId===c.id);I(g||null);let h=g?.role==="editor",i=g?.role==="viewer"||!f&&g?.role!=="editor";C({isOwner:f,isEditor:h,isViewer:i})}}catch(a){console.log("Could not fetch user role, assuming editor"),C({isOwner:!1,isEditor:!0,isViewer:!1})}let c=await e.items.getAll(a);o(c);try{let b=await e.lists.getCategories(a);y(b)}catch(b){let a=c.filter(a=>a.category).map(a=>a.category).filter((a,b,c)=>c.indexOf(a)===b);y(a)}}catch(b){let a=b instanceof Error?b.message:"Fehler beim Laden";a.includes("Forbidden")||u(a),console.error(b)}finally{s(!1)}},M=async()=>{if(k&&H&&confirm("Möchtest du diese Liste wirklich verlassen?"))try{await e.collaborators.remove(Number(k),H.id),f.push("/dashboard")}catch(a){u(a instanceof Error?a.message:"Fehler beim Verlassen der Liste")}},N=async()=>{if(k&&H)try{let a=await e.collaborators.accept(Number(k),H.id);I(a),u("")}catch(a){u(a instanceof Error?a.message:"Fehler beim Akzeptieren der Einladung")}},O=async a=>{if(a.preventDefault(),p.trim()&&k){if(B.isViewer)return void u("Du kannst dieser Liste keine Artikel hinzufügen (Viewer-Zugriff)");try{await e.items.create(Number(k),p),q(""),L()}catch(b){let a=b instanceof Error?b.message:"Fehler beim Hinzufügen";a.includes("Forbidden")?u("Du darfst diese Liste nicht bearbeiten"):u(a)}}},P=async(a,b)=>{if(k)try{await e.items.update(Number(k),a,!b),L()}catch(a){u(a instanceof Error?a.message:"Fehler beim Aktualisieren")}},Q=async a=>{if(k)try{await e.items.delete(Number(k),a),L()}catch(a){u(a instanceof Error?a.message:"Fehler beim Löschen")}},R=a=>{x.includes(a)||y([...x,a])},S=async a=>{if(k)try{await e.lists.deleteCategory(Number(k),a),y(x.filter(b=>b!==a)),L()}catch(a){u(a instanceof Error?a.message:"Fehler beim Löschen der Kategorie")}},T=a=>{a.preventDefault(),a.dataTransfer.dropEffect="move"},U=async(a,b)=>{if(a.preventDefault(),!D||D===b||B.isViewer)return void E(null);let c=x.indexOf(D),d=x.indexOf(b);if(-1===c||-1===d)return void E(null);let f=[...x];f.splice(c,1),f.splice(d,0,D),y(f),E(null),G(!0);try{await e.lists.updateCategoryOrder(Number(k),f)}catch(a){y(x),u(a instanceof Error?a.message:"Fehler beim Speichern der Kategorie-Reihenfolge")}finally{G(!1)}};return l?(0,b.jsxs)("div",{className:"min-h-screen bg-[#0a0a0f] flex flex-col",children:[(0,b.jsx)("header",{className:"bg-gradient-to-b from-[#14141f] to-transparent border-b border-[#2d2d3f]/50",children:(0,b.jsxs)("div",{className:"max-w-4xl mx-auto px-3 sm:px-6 py-4 sm:py-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center gap-2 sm:gap-4 mb-3 sm:mb-4",children:[(0,b.jsxs)("button",{onClick:()=>f.push("/dashboard"),className:"inline-flex items-center gap-1 sm:gap-2 text-purple-400 hover:text-purple-300 text-xs sm:text-sm font-medium transition-all group flex-shrink-0",children:[(0,b.jsx)("svg",{className:"w-4 h-4 group-hover:-translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Zurück zu Listen"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Zurück"})]}),(0,b.jsxs)("div",{className:"flex gap-1 sm:gap-3 flex-shrink-0",children:[H&&"pending"===H.status&&(0,b.jsxs)("button",{onClick:N,className:"inline-flex items-center gap-1 sm:gap-2 text-green-400 hover:text-green-300 text-xs sm:text-sm font-medium transition-all group",title:"Einladung akzeptieren",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Akzeptieren"})]}),H&&!B.isOwner&&(0,b.jsxs)("button",{onClick:M,className:"inline-flex items-center gap-1 sm:gap-2 text-red-400 hover:text-red-300 text-xs sm:text-sm font-medium transition-all group",title:"Liste verlassen",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Verlassen"})]}),B.isOwner&&(0,b.jsxs)("button",{onClick:()=>w(!0),className:"inline-flex items-center gap-1 sm:gap-2 text-purple-400 hover:text-purple-300 text-xs sm:text-sm font-medium transition-all group",title:"Liste teilen",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Teilen"})]})]})]}),(0,b.jsx)("div",{className:"flex items-center justify-center gap-3 sm:gap-4",children:(0,b.jsxs)("div",{className:"flex-1 text-center",children:[(0,b.jsx)("h1",{className:"text-lg sm:text-3xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent mb-1 sm:mb-2 truncate",children:l.title}),l.description&&(0,b.jsx)("p",{className:"text-gray-400 text-xs sm:text-sm line-clamp-2",children:l.description})]})})]})}),(0,b.jsx)("main",{className:"flex-1 flex flex-col items-center max-w-4xl mx-auto px-3 sm:px-6 py-4 sm:py-8 w-full",children:(0,b.jsxs)("div",{className:"w-full max-w-3xl",children:[t&&(0,b.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 text-red-400 px-3 sm:px-4 py-2 sm:py-3 rounded-lg sm:rounded-2xl mb-4 sm:mb-6 flex items-center justify-between backdrop-blur-sm",children:[(0,b.jsx)("span",{className:"text-xs sm:text-sm",children:t}),(0,b.jsx)("button",{onClick:()=>u(""),className:"text-red-400 hover:text-red-300 font-bold ml-2 flex-shrink-0",children:"✕"})]}),(0,b.jsxs)("form",{onSubmit:O,className:"mb-4 sm:mb-6 w-full",children:[(0,b.jsxs)("div",{className:"flex gap-2 sm:gap-3",children:[(0,b.jsx)("div",{className:"relative flex-1",children:(0,b.jsx)("input",{type:"text",value:p,onChange:a=>q(a.target.value),placeholder:"Neuen Artikel hinzufügen...",disabled:B.isViewer,className:"w-full px-3 sm:px-5 py-3 sm:py-4 bg-[#14141f] border border-[#2d2d3f] rounded-lg sm:rounded-2xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all disabled:opacity-50 disabled:cursor-not-allowed text-sm"})}),(0,b.jsxs)("button",{type:"submit",disabled:B.isViewer,className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white font-bold py-3 sm:py-4 px-3 sm:px-6 rounded-lg sm:rounded-2xl transition-all shadow-lg shadow-purple-500/40 hover:shadow-purple-500/60 hover:scale-[1.03] active:scale-95 flex items-center gap-1 sm:gap-2 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 flex-shrink-0",children:[(0,b.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Hinzufügen"})]})]}),B.isViewer&&(0,b.jsx)("p",{className:"text-yellow-500 text-xs sm:text-sm mt-2",children:"Du hast nur Zugriff als Zuschauer"})]}),0===n.length?(0,b.jsxs)("div",{className:"text-center py-12 sm:py-20 bg-gradient-to-br from-[#14141f] to-[#1a1a2e] border border-[#2d2d3f] rounded-xl sm:rounded-2xl",children:[(0,b.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-white mb-2",children:"Liste ist leer"}),(0,b.jsx)("p",{className:"text-gray-400 text-xs sm:text-sm",children:"Füge deinen ersten Artikel hinzu"})]}):(0,b.jsx)("div",{className:"space-y-3 sm:space-y-4 w-full",children:(Object.keys(a=n.reduce((a,b)=>{let c=b.category||"Ohne Kategorie";return a[c]||(a[c]=[]),a[c].push(b),a},{})).forEach(b=>{a[b].sort((a,b)=>a.completed===b.completed?0:a.completed?1:-1)}),Object.keys(a).sort((a,b)=>{let c=x.indexOf(a),d=x.indexOf(b);return -1!==c&&-1!==d?c-d:-1!==c?-1:-1!==d||"Ohne Kategorie"===a?1:"Ohne Kategorie"===b?-1:a.localeCompare(b)}).map(c=>(0,b.jsxs)("div",{className:"bg-gradient-to-br from-[#14141f] to-[#1a1a2e] border border-[#2d2d3f] rounded-2xl shadow-xl",onDragOver:T,onDrop:a=>U(a,c),children:[(0,b.jsxs)("div",{draggable:!B.isViewer,onDragStart:a=>{!B.isViewer&&(E(c),a.dataTransfer.effectAllowed="move")},className:`bg-purple-500/10 border-b border-[#2d2d3f] px-4 py-3 rounded-t-2xl flex items-center gap-3 transition-all ${!B.isViewer?"cursor-move hover:bg-purple-500/20":""} ${D===c?"opacity-50 bg-purple-500/30":""}`,title:B.isViewer?"":"Kategorie ziehen zum Umsortieren",children:[!B.isViewer&&(0,b.jsx)("svg",{className:"w-5 h-5 text-gray-500 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{d:"M9 3h2v2H9V3zm0 4h2v2H9V7zm0 4h2v2H9v-2zm4-8h2v2h-2V3zm0 4h2v2h-2V7zm0 4h2v2h-2v-2z"})}),(0,b.jsx)("h3",{className:"text-sm font-semibold text-purple-400 flex-1",children:c})]}),(0,b.jsx)("ul",{className:"divide-y divide-[#2d2d3f]",children:a[c].map(a=>(0,b.jsx)(j,{id:a.id,name:a.name,category:a.category,completed:a.completed,listId:Number(k),customCategories:x,recipeName:a.recipeName,onToggle:P,onDelete:Q,onCategoryChange:L,onAddCategory:R,onDeleteCategory:S,isViewer:B.isViewer},a.id))})]},c)))})]})}),v&&k&&(0,b.jsx)(h,{listId:Number(k),onClose:()=>w(!1)})]}):(0,b.jsx)("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-gray-400 text-lg",children:"Liste nicht gefunden"})})}a.s(["default",()=>k],4160)}];

//# sourceMappingURL=src_app_list_%5BlistId%5D_page_tsx_06559648._.js.map