module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},93462,a=>{"use strict";let b=async(a,b={})=>{let c={"Content-Type":"application/json",...b.headers},d=await fetch(`http://localhost:3000/api${a}`,{...b,headers:c});if(!d.ok){let a={error:"API Error"};try{let b=d.headers.get("content-type");a=b?.includes("application/json")?await d.json():{error:`HTTP ${d.status}: ${d.statusText}`}}catch(b){a={error:`HTTP ${d.status}: ${d.statusText}`}}throw Error(a.error||"API Error")}return d.json()};a.s(["auth",0,{register:(a,c)=>b("/auth/register",{method:"POST",body:JSON.stringify({username:a,password:c})}),login:(a,c)=>b("/auth/login",{method:"POST",body:JSON.stringify({username:a,password:c})}),me:()=>b("/auth/me"),updateProfile:(a,c)=>b("/auth/profile",{method:"PUT",body:JSON.stringify({currentPassword:a,newPassword:c})}),logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("userId")}},"collaborators",0,{getAll:a=>b(`/lists/${a}/collaborators`),invite:(a,c,d)=>b(`/lists/${a}/collaborators`,{method:"POST",body:JSON.stringify({username:c,role:d})}),add:(a,c,d)=>b(`/lists/${a}/collaborators`,{method:"POST",body:JSON.stringify({userId:c,role:d})}),update:(a,c,d)=>b(`/lists/${a}/collaborators/${c}`,{method:"PUT",body:JSON.stringify({role:d})}),remove:(a,c)=>b(`/lists/${a}/collaborators/${c}`,{method:"DELETE"}),accept:(a,c)=>b(`/lists/${a}/collaborators/${c}/accept`,{method:"POST"})},"items",0,{getAll:a=>b(`/lists/${a}/items`),create:(a,c)=>b(`/lists/${a}/items`,{method:"POST",body:JSON.stringify({name:c})}),update:(a,c,d)=>b(`/lists/${a}/items/${c}`,{method:"PUT",body:JSON.stringify({completed:d})}),updateCategory:(a,c,d)=>b(`/lists/${a}/items/${c}`,{method:"PUT",body:JSON.stringify({category:d})}),delete:(a,c)=>b(`/lists/${a}/items/${c}`,{method:"DELETE"})},"lists",0,{getAll:()=>b("/lists"),getById:a=>b(`/lists/${a}`),create:(a,c="")=>b("/lists",{method:"POST",body:JSON.stringify({title:a,description:c})}),update:(a,c,d)=>b(`/lists/${a}`,{method:"PUT",body:JSON.stringify({title:c,description:d})}),delete:a=>b(`/lists/${a}`,{method:"DELETE"}),getCategories:a=>b(`/lists/${a}/categories`),syncCategory:(a,c,d)=>b(`/lists/${a}/categories`,{method:"POST",body:JSON.stringify({itemName:c,category:d})}),deleteCategory:(a,c)=>b(`/lists/${a}/categories/${encodeURIComponent(c)}`,{method:"DELETE"}),getCategoryOrder:a=>b(`/lists/${a}/categories/order`),updateCategoryOrder:(a,c)=>b(`/lists/${a}/categories/order`,{method:"PUT",body:JSON.stringify({categories:c})})},"recipes",0,{getAll:()=>b("/recipes"),getById:a=>b(`/recipes/${a}`),create:(a,c="",d=[])=>b("/recipes",{method:"POST",body:JSON.stringify({title:a,description:c,items:d})}),update:(a,c,d,e)=>b(`/recipes/${a}`,{method:"PUT",body:JSON.stringify({title:c,description:d,items:e})}),delete:a=>b(`/recipes/${a}`,{method:"DELETE"}),addItem:(a,c)=>b(`/recipes/${a}/items`,{method:"POST",body:JSON.stringify({name:c})}),deleteItem:(a,c)=>b(`/recipes/${a}/items/${c}`,{method:"DELETE"}),addToList:(a,c,d)=>b(`/recipes/${a}/add-to-list`,{method:"POST",body:JSON.stringify({listId:c,selectedItemIds:d})})}])},49846,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(93462);class f{ws=null;url="";listeners=new Map;reconnectAttempts=0;maxReconnectAttempts=5;reconnectDelay=3e3;connect(a){return new Promise((b,c)=>{try{this.ws=new WebSocket(`${this.url}?token=${a}`),this.ws.onopen=()=>{console.log("WebSocket verbunden"),this.reconnectAttempts=0,b()},this.ws.onmessage=a=>{let b=JSON.parse(a.data);console.log("WebSocket Nachricht:",b);let c=this.listeners.get(b.type);c&&c.forEach(a=>a(b.data))},this.ws.onerror=a=>{console.warn("WebSocket nicht verfÃ¼gbar (optional)"),b()},this.ws.onclose=()=>{console.log("WebSocket getrennt"),this.attemptReconnect(a)}}catch(a){console.warn("WebSocket-Verbindung fehlgeschlagen:",a),b()}})}attemptReconnect(a){this.reconnectAttempts<this.maxReconnectAttempts&&(this.reconnectAttempts++,console.log(`Reconnection-Versuch ${this.reconnectAttempts}/${this.maxReconnectAttempts}...`),setTimeout(()=>{this.connect(a).catch(a=>{console.error("Reconnection fehlgeschlagen:",a)})},this.reconnectDelay))}subscribe(a,b){return this.listeners.has(a)||this.listeners.set(a,new Set),this.listeners.get(a).add(b),()=>{let c=this.listeners.get(a);c&&c.delete(b)}}disconnect(){this.ws&&(this.ws.close(),this.ws=null)}isConnected(){return null!==this.ws&&this.ws.readyState===WebSocket.OPEN}subscribeToList(a){this.isConnected()&&this.ws.send(JSON.stringify({type:"subscribe",listId:a}))}unsubscribeFromList(a){this.isConnected()&&this.ws.send(JSON.stringify({type:"unsubscribe",listId:a}))}}let g=new f;function h({list:a,onDelete:c}){let e=(0,d.useRouter)();return(0,b.jsxs)("div",{className:"w-full relative bg-gradient-to-br from-[#14141f]/90 to-[#1a1a2e]/90 backdrop-blur-sm border border-purple-500/30 rounded-2xl sm:rounded-3xl p-4 sm:p-6 hover:border-purple-400/60 transition-all cursor-pointer group hover:shadow-2xl hover:shadow-purple-500/30 hover:-translate-y-1 sm:hover:-translate-y-2",onClick:()=>e.push(`/list/${a.id}`),children:[(0,b.jsx)("div",{className:"absolute top-0 right-0 w-32 sm:w-40 h-32 sm:h-40 bg-purple-500/10 rounded-full blur-3xl group-hover:bg-purple-500/20 transition-all"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"flex items-start gap-2 sm:gap-3 mb-3 sm:mb-4",children:(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"text-base sm:text-lg font-bold text-white group-hover:text-purple-300 transition line-clamp-2 mb-1",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-gray-400 text-xs sm:text-sm line-clamp-2",children:a.description})]})}),(0,b.jsxs)("div",{className:"flex justify-between items-center pt-3 sm:pt-4 border-t border-purple-500/20",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2 text-xs text-gray-500",children:[(0,b.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,b.jsx)("span",{className:"text-xs",children:new Date(a.createdAt).toLocaleDateString("de-DE")})]}),(0,b.jsx)("button",{onClick:b=>{b.stopPropagation(),c(a.id)},className:"p-1.5 sm:p-2 text-red-400 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition-all flex-shrink-0",title:"Liste lÃ¶schen",children:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})}function i({onClose:a,onCreate:d}){let[e,f]=(0,c.useState)(""),[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(!1),k=async a=>{if(a.preventDefault(),e.trim()){j(!0);try{await d(e,g)}finally{j(!1)}}};return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-3 sm:p-4 animate-fadeIn",children:(0,b.jsx)("div",{className:"bg-gradient-to-br from-[#14141f]/95 to-[#1a1a2e]/95 backdrop-blur-xl border border-purple-500/30 rounded-2xl sm:rounded-3xl max-w-md w-full shadow-2xl shadow-purple-500/30 animate-slideUp",children:(0,b.jsxs)("div",{className:"p-5 sm:p-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6",children:[(0,b.jsx)("div",{className:"w-10 sm:w-12 h-10 sm:h-12 bg-gradient-to-br from-purple-500/30 to-purple-700/30 border border-purple-500/50 rounded-xl sm:rounded-2xl flex items-center justify-center flex-shrink-0",children:(0,b.jsx)("span",{className:"text-lg sm:text-xl font-bold text-purple-400",children:"+"})}),(0,b.jsx)("h2",{className:"text-lg sm:text-2xl font-bold text-white",children:"Neue Liste erstellen"})]}),(0,b.jsxs)("form",{onSubmit:k,className:"space-y-5",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-300 text-xs sm:text-sm font-medium mb-2",children:"Titel"}),(0,b.jsx)("input",{type:"text",value:e,onChange:a=>f(a.target.value),placeholder:"z.B. Wochenmarkt",className:"w-full px-3 sm:px-4 py-2 sm:py-3 bg-[#1a1a2e] border border-purple-500/30 rounded-lg sm:rounded-2xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-500/30 transition-all text-sm",autoFocus:!0,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-gray-300 text-xs sm:text-sm font-medium mb-2",children:"Beschreibung (optional)"}),(0,b.jsx)("textarea",{value:g,onChange:a=>h(a.target.value),placeholder:"z.B. Einkaufen fÃ¼r die Woche",className:"w-full px-3 sm:px-4 py-2 sm:py-3 bg-[#1a1a2e] border border-purple-500/30 rounded-lg sm:rounded-2xl text-white placeholder-gray-500 focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-500/30 transition-all resize-none text-sm",rows:3})]}),(0,b.jsxs)("div",{className:"flex gap-2 sm:gap-3 pt-2",children:[(0,b.jsx)("button",{type:"button",onClick:a,className:"flex-1 px-3 sm:px-4 py-2 sm:py-3 text-gray-300 bg-[#1a1a2e] border border-purple-500/20 hover:border-purple-500/50 hover:bg-[#14141f] rounded-lg sm:rounded-2xl font-medium transition-all text-xs sm:text-base",children:"Abbrechen"}),(0,b.jsx)("button",{type:"submit",disabled:i,className:"flex-1 px-3 sm:px-4 py-2 sm:py-3 text-white bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 disabled:from-gray-600 disabled:to-gray-700 rounded-lg sm:rounded-2xl font-bold transition-all shadow-lg shadow-purple-500/40 hover:shadow-purple-500/60 hover:scale-[1.02] active:scale-95 text-xs sm:text-base",children:i?"Wird erstellt...":"Erstellen"})]})]})]})})})}var j=a.i(90139);function k(){let a=(0,d.useRouter)(),[f,k]=(0,c.useState)("lists"),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(!1);(0,c.useEffect)(()=>{u(!0)},[]),(0,c.useEffect)(()=>{if(!t)return;v(),w();let a=localStorage.getItem("token");if(a){g.connect(a).catch(a=>{console.error("WebSocket-Verbindung fehlgeschlagen:",a)});let b=g.subscribe("list_updated",()=>{console.log("Liste aktualisiert - neu laden"),w()});return()=>{b(),g.disconnect()}}},[t]);let v=()=>{localStorage.getItem("token")||a.push("/login")},w=async()=>{try{o(!0);let a=await e.lists.getAll();m(a)}catch(a){console.error(a)}finally{o(!1)}},x=async(a,b)=>{try{await e.lists.create(a,b),q(!1),w()}catch(a){s(a instanceof Error?a.message:"Fehler beim Erstellen der Liste")}},y=async a=>{if(confirm("Liste wirklich LÃ¶schen?"))try{await e.lists.delete(a),w()}catch(a){s(a instanceof Error?a.message:"Fehler beim LÃ¶schen der Liste")}};return(0,b.jsxs)("div",{className:"min-h-screen bg-[#0a0a0f] flex flex-col",children:[(0,b.jsx)("header",{className:"bg-gradient-to-b from-[#14141f] to-transparent border-b border-[#2d2d3f]/50",children:(0,b.jsx)("div",{className:"max-w-6xl mx-auto px-3 sm:px-6 py-4 sm:py-6",children:(0,b.jsxs)("div",{className:"flex justify-between items-center gap-2 sm:gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 min-w-0",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("img",{src:"/FoodPlaner.png",alt:"FoodPlaner Logo",className:"w-10 h-10 sm:w-12 sm:h-12 rounded-2xl"})}),(0,b.jsxs)("div",{className:"text-left min-w-0",children:[(0,b.jsx)("h1",{className:"text-xl sm:text-3xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent truncate",children:"FoodPlaner"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 hidden sm:block",children:"Einkaufslisten verwalten"})]})]}),(0,b.jsxs)("div",{className:"flex gap-1 sm:gap-2 flex-shrink-0",children:[(0,b.jsxs)("button",{onClick:()=>k("lists"),className:`px-2 sm:px-4 py-2 rounded-lg sm:rounded-xl text-xs sm:text-sm font-medium transition-all whitespace-nowrap ${"lists"===f?"bg-purple-500 text-white":"bg-[#1a1a2e]/80 border border-[#2d2d3f] text-gray-400 hover:text-purple-400"}`,title:"Listen",children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"Listen"}),(0,b.jsx)("span",{className:"sm:hidden",children:"ðŸ“‹"})]}),(0,b.jsxs)("button",{onClick:()=>k("recipes"),className:`px-2 sm:px-4 py-2 rounded-lg sm:rounded-xl text-xs sm:text-sm font-medium transition-all whitespace-nowrap ${"recipes"===f?"bg-purple-500 text-white":"bg-[#1a1a2e]/80 border border-[#2d2d3f] text-gray-400 hover:text-purple-400"}`,title:"Rezepte",children:[(0,b.jsx)("span",{className:"hidden sm:inline",children:"Rezepte"}),(0,b.jsx)("span",{className:"sm:hidden",children:"ðŸ³"})]}),(0,b.jsx)("button",{onClick:()=>a.push("/profile"),className:"p-2 sm:p-3 bg-[#1a1a2e]/80 border border-[#2d2d3f] hover:border-purple-500/50 rounded-lg sm:rounded-xl transition-all text-gray-400 hover:text-purple-400 flex-shrink-0",title:"Profil",children:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]})]})})}),(0,b.jsx)("main",{className:"flex-1 flex flex-col max-w-6xl mx-auto px-3 sm:px-6 py-4 sm:py-12 w-full",children:(0,b.jsxs)("div",{className:"w-full",children:[r&&(0,b.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 text-red-400 px-3 sm:px-4 py-2 sm:py-3 rounded-xl sm:rounded-2xl mb-4 sm:mb-8 flex items-center justify-between backdrop-blur-sm",children:[(0,b.jsx)("span",{className:"text-xs sm:text-sm",children:r}),(0,b.jsx)("button",{onClick:()=>s(""),className:"text-red-400 hover:text-red-300 font-bold ml-2 flex-shrink-0",children:"âœ•"})]}),"lists"===f&&(0,b.jsx)("div",{className:"w-full flex flex-col items-center justify-center",children:n?(0,b.jsxs)("div",{className:"text-center py-16 sm:py-32",children:[(0,b.jsx)("div",{className:"inline-block w-12 sm:w-16 h-12 sm:h-16 border-4 border-purple-500/20 border-t-purple-500 rounded-full animate-spin mb-3 sm:mb-4"}),(0,b.jsx)("p",{className:"text-xs sm:text-base text-gray-400",children:"LÃ¤dt deine Listen..."})]}):0===l.length?(0,b.jsxs)("div",{className:"text-center py-12 sm:py-20",children:[(0,b.jsx)("h2",{className:"text-lg sm:text-2xl font-bold text-white mb-2",children:"Keine Listen vorhanden"}),(0,b.jsx)("p",{className:"text-xs sm:text-base text-gray-400 mb-6 sm:mb-8",children:"Erstelle deine erste Einkaufsliste"}),(0,b.jsxs)("button",{onClick:()=>q(!0),className:"inline-flex items-center gap-2 sm:gap-3 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white font-bold py-3 sm:py-4 px-6 sm:px-8 rounded-xl sm:rounded-2xl transition-all shadow-xl shadow-purple-500/40 hover:shadow-purple-500/60 hover:scale-[1.03] active:scale-95 text-sm sm:text-base",children:[(0,b.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Erste Liste erstellen"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Liste erstellen"})]})]}):(0,b.jsxs)("div",{className:"w-full",children:[(0,b.jsxs)("div",{className:"flex justify-center items-center mb-6 sm:mb-8 flex-col gap-3 sm:gap-4",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h2",{className:"text-lg sm:text-xl font-bold text-white",children:"Deine Listen"}),(0,b.jsxs)("p",{className:"text-xs sm:text-sm text-gray-400 mt-1",children:[l.length," ",1===l.length?"Liste":"Listen"]})]}),(0,b.jsxs)("button",{onClick:()=>q(!0),className:"inline-flex items-center gap-1 sm:gap-2 bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white font-bold py-2 sm:py-3 px-4 sm:px-6 rounded-lg sm:rounded-2xl transition-all shadow-lg shadow-purple-500/40 hover:shadow-purple-500/60 hover:scale-[1.02] active:scale-95 text-xs sm:text-base",children:[(0,b.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Neue Liste"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Neue"})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-5 justify-items-center max-w-5xl mx-auto w-full",children:l.map(a=>(0,b.jsx)(h,{list:a,onDelete:y},a.id))})]})}),"recipes"===f&&(0,b.jsx)(j.default,{shoppingLists:l})]})}),p&&(0,b.jsx)(i,{onClose:()=>q(!1),onCreate:x})]})}a.s(["default",()=>k],49846)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__76b29f45._.js.map